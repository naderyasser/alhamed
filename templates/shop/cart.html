{% extends "shop/base.html" %} {% block content %}
<style>
  /* ============================================
       CART PAGE - MODERN DESIGN SYSTEM 2025
       ============================================ */

  .cart-page {
    --cart-primary: #8ca896;
    --cart-primary-dark: #6b8e6e;
    --cart-primary-light: #b8d4a8;
    --cart-accent: #f59e0b;
    --cart-bg-primary: #fafafa;
    --cart-bg-secondary: #ffffff;
    --cart-bg-tertiary: #f5f7f5;
    --cart-text-primary: #1a202c;
    --cart-text-secondary: #4a5568;
    --cart-text-tertiary: #718096;
    --cart-border: #e8ecf0;
    --cart-border-light: #f0f4f8;
    --cart-shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.04);
    --cart-shadow-md: 0 8px 16px rgba(0, 0, 0, 0.08);
    --cart-shadow-lg: 0 16px 32px rgba(0, 0, 0, 0.12);
    --cart-shadow-hover: 0 20px 40px rgba(140, 168, 150, 0.15);
    --cart-radius-sm: 8px;
    --cart-radius-md: 12px;
    --cart-radius-lg: 16px;
    --cart-radius-xl: 24px;
    --cart-radius-full: 9999px;
    --cart-transition-base: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --cart-transition-slow: 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    --cart-font-heading: "Playfair Display", Georgia, serif;
    --cart-font-body: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
      sans-serif;
  }

  /* ============================================
       HERO SECTION
       ============================================ */

  .cart-page .hero-section {
    position: relative;
    padding: 3rem 0;
    background: linear-gradient(
      135deg,
      var(--cart-bg-tertiary) 0%,
      var(--cart-bg-primary) 100%
    );
    overflow: hidden;
  }

  .cart-page .hero-section::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(
        circle at 20% 25%,
        rgba(140, 168, 150, 0.05) 0%,
        transparent 50%
      ),
      radial-gradient(
        circle at 75% 75%,
        rgba(140, 168, 150, 0.05) 0%,
        transparent 50%
      );
    z-index: 0;
  }

  .cart-page .hero-content {
    position: relative;
    z-index: 1;
    text-align: center;
  }

  .cart-page .hero-title {
    font-family: var(--cart-font-heading);
    font-size: clamp(2rem, 4vw, 2.5rem);
    font-weight: 800;
    color: var(--cart-text-primary);
    margin-bottom: 1rem;
  }

  .cart-page .breadcrumbs {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.95rem;
    color: var(--cart-text-secondary);
  }

  .cart-page .breadcrumbs a {
    color: var(--cart-primary);
    transition: color var(--cart-transition-base);
  }

  .cart-page .breadcrumbs a:hover {
    color: var(--cart-primary-dark);
  }

  .cart-page .breadcrumbs span {
    color: var(--cart-text-tertiary);
  }

  /* ============================================
       CART SECTION
       ============================================ */

  .cart-page .cart-section {
    padding: 4rem 0;
    background: var(--cart-bg-primary);
  }

  .cart-page .cart-table {
    background: var(--cart-bg-secondary);
    border-radius: var(--cart-radius-lg);
    padding: 2rem;
    box-shadow: var(--cart-shadow-md);
  }

  .cart-page .cart-header {
    display: none;
    justify-content: space-between;
    padding-bottom: 1.5rem;
    border-bottom: 2px solid var(--cart-border-light);
    margin-bottom: 1.5rem;
    font-weight: 600;
    color: var(--cart-text-secondary);
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .cart-page .cart-header span {
    flex: 1;
  }

  .cart-page .cart-header .text-center {
    text-align: center;
  }

  .cart-page .cart-header .text-end {
    text-align: left;
  }

  .cart-page .cart-item {
    padding: 1.5rem 0;
    border-bottom: 1px solid var(--cart-border-light);
    transition: all var(--cart-transition-base);
  }

  .cart-page .cart-item:hover {
    background: var(--cart-bg-tertiary);
    border-radius: var(--cart-radius-md);
    padding: 1.5rem;
    margin: 0 -1.5rem;
  }

  .cart-page .cart-item:last-child {
    border-bottom: none;
  }

  .cart-page .product-image {
    width: 100px;
    height: 100px;
    object-fit: cover;
    border-radius: var(--cart-radius-md);
    box-shadow: var(--cart-shadow-sm);
    transition: transform var(--cart-transition-base);
  }

  .cart-page .cart-item:hover .product-image {
    transform: scale(1.05);
  }

  .cart-page .item-name {
    font-family: var(--cart-font-heading);
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--cart-text-primary);
    margin-bottom: 0.5rem;
  }

  .cart-page .item-category {
    font-size: 0.9rem;
    color: var(--cart-text-tertiary);
    margin-bottom: 1rem;
  }

  .cart-page .quantity-selector {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .cart-page .btn-qty {
    width: 40px;
    height: 40px;
    border: 2px solid var(--cart-border);
    background: var(--cart-bg-tertiary);
    color: var(--cart-text-primary);
    border-radius: var(--cart-radius-sm);
    font-size: 1.25rem;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--cart-transition-base);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .cart-page .btn-qty:hover {
    background: var(--cart-primary);
    color: white;
    border-color: var(--cart-primary);
  }

  .cart-page .qty-input {
    width: 60px;
    height: 40px;
    border: 2px solid var(--cart-border);
    border-radius: var(--cart-radius-sm);
    text-align: center;
    font-size: 1rem;
    font-weight: 600;
    color: var(--cart-text-primary);
    background: var(--cart-bg-secondary);
    transition: all var(--cart-transition-base);
  }

  .cart-page .qty-input:focus {
    outline: none;
    border-color: var(--cart-primary);
    box-shadow: 0 0 0 4px rgba(140, 168, 150, 0.1);
  }

  .cart-page .item-subtotal {
    font-family: var(--cart-font-heading);
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--cart-primary-dark);
    text-align: left;
  }

  .cart-page .btn-remove {
    color: #ef4444;
    font-size: 0.9rem;
    font-weight: 600;
    transition: all var(--cart-transition-base);
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
  }

  .cart-page .btn-remove:hover {
    color: #dc2626;
    transform: translateX(-3px);
  }

  /* Empty Cart */
  .cart-page .empty-cart {
    text-align: center;
    padding: 4rem 2rem;
  }

  .cart-page .empty-cart i {
    font-size: 5rem;
    color: var(--cart-text-tertiary);
    margin-bottom: 2rem;
  }

  .cart-page .empty-cart h3 {
    font-family: var(--cart-font-heading);
    font-size: 1.75rem;
    color: var(--cart-text-primary);
    margin-bottom: 1.5rem;
  }

  /* Cart Summary */
  .cart-page .cart-summary {
    background: var(--cart-bg-secondary);
    border-radius: var(--cart-radius-lg);
    padding: 2rem;
    box-shadow: var(--cart-shadow-md);
    position: sticky;
    top: 100px;
  }

  .cart-page .summary-title {
    font-family: var(--cart-font-heading);
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--cart-text-primary);
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid var(--cart-border-light);
  }

  .cart-page .summary-table {
    width: 100%;
    margin-bottom: 2rem;
  }

  .cart-page .summary-table tr {
    border-bottom: 1px solid var(--cart-border-light);
  }

  .cart-page .summary-table tr:last-child {
    border-bottom: none;
  }

  .cart-page .summary-table th {
    padding: 1rem 0;
    text-align: right;
    font-weight: 600;
    color: var(--cart-text-secondary);
    font-size: 0.95rem;
  }

  .cart-page .summary-table td {
    padding: 1rem 0;
    text-align: left;
    font-weight: 700;
    color: var(--cart-text-primary);
    font-size: 1.1rem;
  }

  .cart-page .summary-table .total-row {
    border-top: 2px solid var(--cart-border-light);
  }

  .cart-page .summary-table .total-row td {
    color: var(--cart-primary-dark);
    font-size: 1.5rem;
  }

  .cart-page .summary-actions {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .cart-page .btn-continue {
    background: transparent;
    color: var(--cart-text-primary);
    border: 2px solid var(--cart-border);
    padding: 1rem 2rem;
    font-size: 1rem;
    font-weight: 600;
    border-radius: var(--cart-radius-md);
    transition: all var(--cart-transition-base);
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
  }

  .cart-page .btn-continue:hover {
    background: var(--cart-bg-tertiary);
    border-color: var(--cart-primary);
    color: var(--cart-primary);
  }

  .cart-page .btn-checkout {
    background: linear-gradient(
      135deg,
      var(--cart-primary) 0%,
      var(--cart-primary-dark) 100%
    );
    color: white;
    border: none;
    padding: 1rem 2rem;
    font-size: 1rem;
    font-weight: 700;
    border-radius: var(--cart-radius-md);
    transition: all var(--cart-transition-base);
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    box-shadow: var(--cart-shadow-sm);
  }

  .cart-page .btn-checkout:hover {
    background: linear-gradient(
      135deg,
      var(--cart-primary-dark) 0%,
      #5a7a5e 100%
    );
    transform: translateY(-3px);
    box-shadow: var(--cart-shadow-hover);
  }

  /* Last Orders */
  .cart-page .last-orders {
    padding: 4rem 0;
    background: var(--cart-bg-secondary);
  }

  .cart-page .section-title {
    font-family: var(--cart-font-heading);
    font-size: 2rem;
    font-weight: 800;
    color: var(--cart-text-primary);
    text-align: center;
    margin-bottom: 3rem;
    position: relative;
    display: inline-block;
  }

  .cart-page .section-title::after {
    content: "";
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 3px;
    background: var(--cart-primary);
    border-radius: 2px;
  }

  .cart-page .order-card {
    background: var(--cart-bg-secondary);
    border-radius: var(--cart-radius-lg);
    padding: 2rem;
    box-shadow: var(--cart-shadow-md);
    transition: all var(--cart-transition-base);
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  .cart-page .order-card:hover {
    transform: translateY(-8px);
    box-shadow: var(--cart-shadow-hover);
  }

  .cart-page .order-title {
    font-family: var(--cart-font-heading);
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--cart-text-primary);
    margin-bottom: 0.5rem;
  }

  .cart-page .order-info {
    font-size: 0.95rem;
    color: var(--cart-text-secondary);
    margin-bottom: 0.5rem;
  }

  .cart-page .order-status {
    display: inline-block;
    padding: 0.5rem 1rem;
    border-radius: var(--cart-radius-full);
    font-size: 0.85rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 1.5rem;
  }

  .cart-page .order-status.pending {
    background: #fef3c7;
    color: #92400e;
  }

  .cart-page .order-status.processing {
    background: #dbeafe;
    color: #1e40af;
  }

  .cart-page .order-status.completed {
    background: #d1fae5;
    color: #065f46;
  }

  .cart-page .order-status.cancelled {
    background: #fee2e2;
    color: #991b1b;
  }

  .cart-page .btn-view-order {
    background: var(--cart-primary);
    color: white;
    border: none;
    padding: 0.875rem 1.5rem;
    font-size: 0.95rem;
    font-weight: 600;
    border-radius: var(--cart-radius-md);
    transition: all var(--cart-transition-base);
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    width: 100%;
  }

  .cart-page .btn-view-order:hover {
    background: var(--cart-primary-dark);
    transform: translateY(-3px);
    box-shadow: var(--cart-shadow-md);
  }

  /* ============================================
       RESPONSIVE DESIGN
       ============================================ */

  @media (min-width: 768px) {
    .cart-page .cart-header {
      display: flex;
    }
  }

  @media (max-width: 992px) {
    .cart-page .cart-summary {
      position: relative;
      top: 0;
      margin-top: 2rem;
    }
  }

  @media (max-width: 768px) {
    .cart-page .hero-section {
      padding: 2rem 0;
    }

    .cart-page .cart-section {
      padding: 2rem 0;
    }

    .cart-page .cart-table {
      padding: 1.5rem;
    }

    .cart-page .cart-summary {
      padding: 1.5rem;
    }

    .cart-page .product-image {
      width: 80px;
      height: 80px;
    }

    .cart-page .item-name {
      font-size: 1rem;
    }

    .cart-page .item-subtotal {
      font-size: 1.1rem;
    }

    .cart-page .last-orders {
      padding: 2rem 0;
    }
  }

  @media (max-width: 576px) {
    .cart-page .hero-title {
      font-size: 1.75rem;
    }

    .cart-page .breadcrumbs {
      font-size: 0.85rem;
      flex-wrap: wrap;
    }

    .cart-page .cart-table {
      padding: 1rem;
    }

    .cart-page .cart-summary {
      padding: 1.25rem;
    }

    .cart-page .product-image {
      width: 70px;
      height: 70px;
    }

    .cart-page .item-subtotal {
      font-size: 1rem;
    }

    .cart-page .summary-table td {
      font-size: 1rem;
    }

    .cart-page .summary-table .total-row td {
      font-size: 1.25rem;
    }
  }

  /* ============================================
       UTILITY CLASSES
       ============================================ */

  .cart-page .display-4 {
    font-family: var(--cart-font-heading);
    font-size: clamp(2rem, 4vw, 3rem);
    font-weight: 800;
    color: var(--cart-text-primary);
  }

  .cart-page .text-center {
    text-align: center;
  }

  .cart-page .text-end {
    text-align: left;
  }

  .cart-page .text-muted {
    color: var(--cart-text-tertiary);
  }

  .cart-page .text-dark {
    color: var(--cart-text-primary);
  }

  .cart-page .text-danger {
    color: #ef4444;
  }

  .cart-page .fw-bold {
    font-weight: 700;
  }

  .cart-page .mb-1 {
    margin-bottom: 0.5rem;
  }

  .cart-page .mb-3 {
    margin-bottom: 1rem;
  }

  .cart-page .mb-4 {
    margin-bottom: 1.5rem;
  }

  .cart-page .mt-2 {
    margin-top: 0.75rem;
  }

  .cart-page .my-4 {
    margin-top: 1.5rem;
    margin-bottom: 1.5rem;
  }

  .cart-page .py-4 {
    padding-top: 1.5rem;
    padding-bottom: 1.5rem;
  }

  .cart-page .py-5 {
    padding-top: 3rem;
    padding-bottom: 3rem;
  }

  .cart-page .d-none {
    display: none;
  }

  .cart-page .d-md-flex {
    display: none;
  }

  .cart-page .d-flex {
    display: flex;
  }

  .cart-page .d-block {
    display: block;
  }

  .cart-page .align-items-center {
    align-items: center;
  }

  .cart-page .justify-content-between {
    justify-content: space-between;
  }

  .cart-page .pb-3 {
    padding-bottom: 1rem;
  }

  .cart-page .border-top {
    border-top: 1px solid var(--cart-border-light);
  }

  .cart-page .rounded {
    border-radius: var(--cart-radius-md);
  }

  .cart-page .rounded-3 {
    border-radius: var(--cart-radius-md);
  }

  .cart-page .shadow-sm {
    box-shadow: var(--cart-shadow-sm);
  }

  .cart-page .border-0 {
    border: none;
  }

  .cart-page .bg-light {
    background: var(--cart-bg-tertiary);
  }

  .cart-page .p-4 {
    padding: 1.5rem;
  }

  .cart-page .w-100 {
    width: 100%;
  }

  .cart-page .mb-4 {
    margin-bottom: 1.5rem;
  }

  .cart-page .mb-3 {
    margin-bottom: 1rem;
  }

  .cart-page .pb-3 {
    padding-bottom: 1rem;
  }

  .cart-page .border-bottom {
    border-bottom: 1px solid var(--cart-border-light);
  }

  .cart-page .table {
    width: 100%;
    border-collapse: collapse;
  }

  .cart-page .table tr {
    border-bottom: 1px solid var(--cart-border-light);
  }

  .cart-page .table th {
    padding: 1rem 0;
    text-align: right;
    font-weight: 600;
    color: var(--cart-text-secondary);
    font-size: 0.95rem;
  }

  .cart-page .table td {
    padding: 1rem 0;
    text-align: left;
    font-weight: 700;
    color: var(--cart-text-primary);
    font-size: 1.1rem;
  }

  .cart-page .table .border-top {
    border-top: 2px solid var(--cart-border-light);
  }

  .cart-page .btn-primary {
    background: var(--cart-primary);
    color: white;
    border: none;
    padding: 0.875rem 1.5rem;
    font-size: 0.95rem;
    font-weight: 600;
    border-radius: var(--cart-radius-md);
    transition: all var(--cart-transition-base);
  }

  .cart-page .btn-primary:hover {
    background: var(--cart-primary-dark);
  }

  .cart-page .btn-outline-dark {
    background: transparent;
    color: var(--cart-text-primary);
    border: 2px solid var(--cart-border);
  }

  .cart-page .btn-outline-dark:hover {
    background: var(--cart-bg-tertiary);
    border-color: var(--cart-primary);
    color: var(--cart-primary);
  }

  .cart-page .btn-dark {
    background: var(--cart-text-primary);
    color: white;
    border: none;
  }

  .cart-page .btn-dark:hover {
    background: var(--cart-text-secondary);
  }

  .cart-page .btn-outline-secondary {
    background: transparent;
    color: var(--cart-text-primary);
    border: 2px solid var(--cart-border);
  }

  .cart-page .btn-outline-secondary:hover {
    background: var(--cart-primary);
    color: white;
    border-color: var(--cart-primary);
  }

  .cart-page .btn-sm {
    padding: 0.5rem 0.75rem;
    font-size: 0.85rem;
  }

  .cart-page .btn-lg {
    padding: 1rem 2rem;
    font-size: 1rem;
  }

  .cart-page .form-control {
    border: 2px solid var(--cart-border);
    border-radius: var(--cart-radius-sm);
    padding: 0.5rem 0.75rem;
    font-size: 0.95rem;
    font-weight: 600;
    color: var(--cart-text-primary);
    background: var(--cart-bg-secondary);
    transition: all var(--cart-transition-base);
  }

  .cart-page .form-control:focus {
    outline: none;
    border-color: var(--cart-primary);
    box-shadow: 0 0 0 4px rgba(140, 168, 150, 0.1);
  }

  .cart-page .text-center {
    text-align: center;
  }

  .cart-page .mx-2 {
    margin-left: 0.5rem;
    margin-right: 0.5rem;
  }

  .cart-page .display-1 {
    font-size: 3.5rem;
    font-weight: 700;
  }

  .cart-page .card-title {
    font-family: var(--cart-font-heading);
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--cart-text-primary);
    margin-bottom: 0.75rem;
  }

  .cart-page .card-text {
    font-size: 0.95rem;
    color: var(--cart-text-secondary);
    margin-bottom: 0.5rem;
  }

  .cart-page .card-body {
    padding: 1.5rem;
  }

  @media (min-width: 768px) {
    .cart-page .d-md-flex {
      display: flex;
    }
  }
</style>

<!-- Cart Page Content -->
<div class="cart-page">
  <!-- Hero Section -->
  <section class="hero-section d-flex align-items-center text-center">
    <div class="container">
      <div class="hero-content">
        <h1 class="hero-title">سلة التسوق</h1>
        <div class="breadcrumbs">
          <a href="{{ url_for('shop.home') }}">الرئيسية</a>
          <span>/</span>
          <a href="{{ url_for('shop.list') }}">المتجر</a>
          <span>/</span>
          <span>سلة التسوق</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Cart Section -->
  <section class="cart-section py-5">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-12 mb-4">
          <div class="cart-table">
            {% if cart_items %}
            <div
              class="cart-header d-none d-md-flex justify-content-between pb-3 text-muted"
            >
              <span class="col-md-4">المنتج</span>
              <span class="col-md-4 text-center">الكمية</span>
              <span class="col-md-4 text-end">المجموع الفرعي</span>
            </div>

            {% for item in cart_items %}
            <div class="cart-item border-top py-4">
              <div class="row align-items-center">
                <div class="col-4 text-center">
                  <img
                    src="{{ item.product.image }}"
                    class="img-fluid rounded product-image"
                    alt="{{ item.product.name }}"
                  />
                </div>
                <div class="col-8">
                  <h6 class="item-name text-dark mb-1">
                    {{ item.product.name }}
                  </h6>
                  <span class="item-category text-muted"
                    >{{ item.product.category.name }}</span
                  >
                  <div class="quantity-selector d-flex align-items-center mt-2">
                    <button
                      class="btn-qty btn-outline-secondary btn-sm"
                      onclick="location.href='/cart/change-quantity/minus/{{ item.id }}'"
                    >
                      -
                    </button>
                    <input
                      type="number"
                      class="form-control text-center mx-2 qty-input"
                      value="{{ item.quantity }}"
                      min="1"
                      max="{{ item.product.stock }}"
                    />
                    <button
                      class="btn-qty btn-outline-secondary btn-sm"
                      onclick="location.href='/cart/change-quantity/plus/{{ item.id }}'"
                    >
                      +
                    </button>
                  </div>
                  <div class="item-subtotal text-dark fw-bold mt-2">
                    {{ "%.2f"|format(item.product.price * item.quantity) }} ج.م
                  </div>
                  <a
                    href="/cart/remove/{{ item.id }}"
                    class="btn-remove text-danger d-block mt-2"
                  >
                    <i class="bx bx-trash"></i>
                    حذف
                  </a>
                </div>
              </div>
            </div>
            {% endfor %} {% else %}
            <div class="empty-cart">
              <i class="bx bx-cart-x display-1 text-muted"></i>
              <h3 class="my-4">سلة التسوق فارغة</h3>
              <a
                href="{{ url_for('shop.list') }}"
                class="btn btn-primary btn-lg"
              >
                <i class="bx bx-shopping-bag"></i>
                ابدأ التسوق
              </a>
            </div>
            {% endif %}
          </div>
        </div>

        {% if cart_items %}
        <div class="col-lg-4 col-md-12">
          <div class="cart-summary bg-light p-4 rounded-3 shadow-sm">
            <h4 class="summary-title text-dark pb-3 border-bottom">
              ملخص السلة
            </h4>
            <table class="summary-table">
              <tr>
                <th>المجموع الفرعي</th>
                <td class="text-end fw-bold">{{ "%.2f"|format(total) }} ج.م</td>
              </tr>
              <tr>
                <th>الشحن</th>
                <td class="text-end text-muted">يتم حسابه عند الدفع</td>
              </tr>
              <tr class="total-row border-top">
                <th>الإجمالي</th>
                <td class="text-end fw-bold">{{ "%.2f"|format(total) }} ج.م</td>
              </tr>
            </table>
            <div class="summary-actions">
              <a
                href="{{ url_for('shop.list') }}"
                class="btn-continue btn-outline-dark w-100 mb-3"
              >
                <i class="bx bx-arrow-back"></i>
                متابعة التسوق
              </a>
              <a
                href="{{ url_for('shop.checkout') }}"
                class="btn-checkout btn-dark w-100"
              >
                <i class="bx bx-check-double"></i>
                إتمام الدفع
              </a>
            </div>
          </div>
        </div>
        {% endif %}
      </div>
    </div>
  </section>

  <!-- Last Orders -->
  <section class="last-orders py-5">
    <div class="container">
      <h2 class="section-title text-center mb-4">آخر الطلبات</h2>
      <div class="row">
        {% for order in all_last_orders %}
        <div class="col-lg-4 col-md-6 mb-4">
          <div class="card shadow-sm border-0 order-card">
            <div class="card-body">
              <h5 class="card-title">طلب #{{ order.id }}</h5>
              <p class="card-text text-muted">
                الإجمالي: {{ order.cod_amount }} ج.م
              </p>
              <p class="card-text text-muted">
                الحالة:
                <span class="order-status {{ order.status|lower }}"
                  >{{ order.status }}</span
                >
              </p>
              <a
                href="{{ url_for('shop.order_detail', order_id=order.id) }}"
                class="btn-view-order btn-primary"
              >
                <i class="bx bx-show"></i>
                عرض الطلب
              </a>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </section>
</div>

{% endblock %}
